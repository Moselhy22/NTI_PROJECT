{% extends "base.html" %}
{% block content %}
<h2>Our Smart Health Products</h2>
<div class="product-grid">
    {% for product in products %}
    <div class="product-card">
        <h3>{{ product.name }}</h3>
        <p>{{ product.description }}</p>
        <p><strong>${{ "%.2f"|format(product.price|float) }}</strong></p>
        <button class="add-to-cart" 
                data-id="{{ product.id }}"
                data-name="{{ product.name }}"
                data-price="{{ product.price }}">
            Add to Cart
        </button>
    </div>
    {% endfor %}
</div>

<script>
document.querySelectorAll('.add-to-cart').forEach(btn => {
    btn.addEventListener('click', () => {
        let cart = JSON.parse(localStorage.getItem('healthband-cart') || '[]');
        cart.push({
            id: btn.dataset.id,
            name: btn.dataset.name,
            price: parseFloat(btn.dataset.price)
        });
        localStorage.setItem('healthband-cart', JSON.stringify(cart));
        alert('Added to cart!');
    });
});
</script>
{% endblock %}